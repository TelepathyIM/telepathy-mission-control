<?xml version="1.0" encoding="UTF-8" ?>
<node name="/Mission_Control" xmlns:tp="http://telepathy.freedesktop.org/wiki/DbusSpec#extensions-v0">
  <tp:copyright>Copyright (C) 2007 Nokia Corporation</tp:copyright>
  <tp:license xmlns="http://www.w3.org/1999/xhtml">
    <p>This library is free software; you can redistribute it and/or
      modify it under the terms of the GNU Lesser General Public
      License as published by the Free Software Foundation; either
      version 2.1 of the License, or (at your option) any later version.</p>

    <p>This library is distributed in the hope that it will be useful,
      but WITHOUT ANY WARRANTY; without even the implied warranty of
      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
      Library General Public License for more details.</p>

    <p>You should have received a copy of the GNU Lesser General Public
      License along with this library; if not, write to the Free Software
      Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA</p>
  </tp:license>
  <interface name="org.freedesktop.Telepathy.MissionControl">
    <annotation name="org.freedesktop.DBus.GLib.CSymbol" value="mcd_service"/>
    <annotation name="org.freedesktop.DBus.GLib.ClientCSymbol" 
      value="mission_control_dbus"/>
    <method name="SetPresence">
      <tp:docstring>
        Request a presence.
      </tp:docstring>
      <arg type="u" name="presence" direction="in">
        <tp:docstring>The presence to set</tp:docstring>
      </arg>
      <arg type="s" name="message" direction="in">
        <tp:docstring>The presence message</tp:docstring>
      </arg>
    </method>
    <method name="GetPresence">
      <tp:docstring>
        Gets the last requested presence.
      </tp:docstring>
      <arg type="u" direction="out">
        <tp:docstring>The presence</tp:docstring>
      </arg>
    </method>
    <method name="GetPresenceMessage">
      <tp:docstring>
        Gets the last requested presence message.
      </tp:docstring>
      <arg type="s" direction="out">
        <tp:docstring>The presence message</tp:docstring>
      </arg>
    </method>
    <method name="GetPresenceActual">
      <tp:docstring>
        Gets the actual presence.
      </tp:docstring>
      <arg type="u" direction="out">
        <tp:docstring>The presence</tp:docstring>
      </arg>
    </method>
    <method name="GetPresenceMessageActual">
      <tp:docstring>
        Gets the actual presence message.
      </tp:docstring>
      <arg type="s" direction="out">
        <tp:docstring>The presence message</tp:docstring>
      </arg>
    </method>
    <method name="RequestChannel">
      <tp:docstring>
        Requests a channel.
      </tp:docstring>
      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
      <arg type="s" name="account_name" direction="in">
        <tp:docstring>Account requesting the channel.</tp:docstring>
      </arg>
      <arg type="s" name="type" direction="in">
        <tp:docstring>D-Bus interface name representing the channel type</tp:docstring>
      </arg>
      <arg type="u" name="handle" direction="in">
        <tp:docstring>A nonzero integer handle representing a contact, room,
          list, etc.</tp:docstring>
      </arg>
      <arg type="i" name="handle_type" direction="in">
        <tp:docstring>A integer representing the channel type</tp:docstring>
      </arg>
      <arg type="u" name="serial" direction="in">
        <tp:docstring>A integer representing an operation ID, which can then be
          used for cancelling the request</tp:docstring>
      </arg>
    </method>
    <method name="RequestChannelWithStringHandle">
      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
      <tp:docstring>
        Requests a channel by a string handle.
      </tp:docstring>
      <arg type="s" name="account_name" direction="in">
        <tp:docstring>Account requesting the channel.</tp:docstring>
      </arg>
      <arg type="s" name="type" direction="in">
        <tp:docstring>D-Bus interface name representing the channel type</tp:docstring>
      </arg>
      <arg type="s" name="handle" direction="in">
        <tp:docstring>A string handle representing a contact, room, list,
          etc.</tp:docstring>
      </arg>
      <arg type="i" name="handle_type" direction="in">
        <tp:docstring>A integer representing the channel type</tp:docstring>
      </arg>
      <arg type="u" name="serial" direction="in">
        <tp:docstring>A integer representing an operation ID, which can then be
          used for cancelling the request</tp:docstring>
      </arg>
    </method>
    <method name="CancelChannelRequest">
      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
      <tp:docstring>
        Cancel a channel request.
      </tp:docstring>
      <arg type="u" name="operation_id" direction="in">
        <tp:docstring>The operation ID which identifies the channel request;
          this is the same integet that was passed when making the
          request</tp:docstring>
      </arg>
    </method>
    <method name="ConnectAllWithDefaultPresence">
      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
      <tp:docstring>
        Request all accounts to go online with the default presence.
      </tp:docstring>
    </method>
    <method name="GetConnectionStatus">
      <tp:docstring>
        Get the status of the connection.
      </tp:docstring>
      <arg type="s" name="account_name" direction="in">
        <tp:docstring>The account</tp:docstring>
      </arg>
      <arg type="u" direction="out">
        <tp:docstring>Status of the connection</tp:docstring>
      </arg>
    </method>
    <method name="GetOnlineConnections">
      <tp:docstring>
        Get a list of the connected accounts.
      </tp:docstring>
      <arg type="as" direction="out">
        <tp:docstring>The array of the online accounts</tp:docstring>
      </arg>
    </method>
    <method name="GetConnection">
      <tp:docstring>
        Get the connection object of an account.
      </tp:docstring>
      <arg type="s" name="account_name" direction="in">
        <tp:docstring>The account</tp:docstring>
      </arg>
      <arg type="s" direction="out">
        <tp:docstring>The D-Bus bus name of the Telepathy
          connection</tp:docstring>
      </arg>
      <arg type="o" direction="out">
        <tp:docstring>The D-Bus object path of the Telepathy
          connection</tp:docstring>
      </arg>
    </method>
    <method name="GetAccountForConnection">
      <tp:docstring>
        Get the account for this Telepathy connection.
      </tp:docstring>
      <arg type="s" name="object_path" direction="in">
        <tp:docstring>The D-Bus object path of the Telepathy
          connection</tp:docstring>
      </arg>
      <arg type="s" direction="out">
        <tp:docstring>The account name</tp:docstring>
      </arg>
    </method>
    <method name="GetUsedChannelsCount">
      <tp:docstring>
        Get the number of channels of the specified type.
      </tp:docstring>
      <arg type="s" name="type" direction="in">
        <tp:docstring>D-Bus interface name representing the channel type</tp:docstring>
      </arg>
      <arg type="u" direction="out">
        <tp:docstring>Number of channels</tp:docstring>
      </arg>
    </method>
    <method name="GetCurrentStatus">
      <tp:docstring>
        Get MissionControl's current status.
      </tp:docstring>
      <arg type="u" name="status" direction="out">
        <tp:docstring>
          Integer representing the MissionControl status (as in the
          <code>McStatus</code> enum):
          <ul>
            <li>0 - disconnected</li>
            <li>1 - connecting</li>
            <li>2 - connected</li>
          </ul>
        </tp:docstring>
      </arg>
      <arg type="u" name="presence" direction="out">
        <tp:docstring>Actual presence</tp:docstring>
      </arg>
      <arg type="u" name="requested_presence" direction="out">
        <tp:docstring>Requested presence</tp:docstring>
      </arg>
      <arg type="a(suuu)" name="accounts" direction="out">
        <tp:docstring>
          An array of structures specifying the accounts' state, fields being:
          <ul>
            <li>The account name</li>
            <li>The account's connection status</li>
            <li>The presence</li>
            <li>The connection status reason</li>
          </ul>
        </tp:docstring>
      </arg>
    </method>
    <method name="RemoteAvatarChanged">
      <tp:docstring>
        Signals the MissionControl service that an account's remote avatar has
        changed
      </tp:docstring>
      <annotation name="org.freedesktop.DBus.GLib.Async" value=""/>
      <arg type="s" name="object_path" direction="in">
        <tp:docstring>D-Bus object path of the connection</tp:docstring>
      </arg>
      <arg type="u" name="contact_id" direction="in">
        <tp:docstring>Telepathy handle for the account (self handle)</tp:docstring>
      </arg>
      <arg type="s" name="token" direction="in">
        <tp:docstring>Avatar token</tp:docstring>
      </arg>
    </method>
    <signal name="AccountPresenceChanged">
      <tp:docstring>
        Emitted when an account's connection status changes
      </tp:docstring>
      <arg type="u" name="status">
        <tp:docstring>The connection status</tp:docstring>
      </arg>
      <arg type="u" name="presence">
        <tp:docstring>The presence</tp:docstring>
      </arg>
      <arg type="s" name="message">
        <tp:docstring>The presence message</tp:docstring>
      </arg>
      <arg type="u" name="reason">
        <tp:docstring>The connection status reason</tp:docstring>
      </arg>
      <arg type="s" name="account_id">
        <tp:docstring>The account name</tp:docstring>
      </arg>
    </signal>
    <signal name="AccountStatusChanged">
      <tp:docstring>
        Emitted when an account's connection status changes
        DEPRECATED
      </tp:docstring>
      <arg type="u" name="status">
        <tp:docstring>The connection status</tp:docstring>
      </arg>
      <arg type="u" name="presence">
        <tp:docstring>The presence</tp:docstring>
      </arg>
      <arg type="u" name="reason">
        <tp:docstring>The connection status reason</tp:docstring>
      </arg>
      <arg type="s" name="account_id">
        <tp:docstring>The account name</tp:docstring>
      </arg>
    </signal>
    <signal name="McdError">
      <tp:docstring>
        Emitted when a requested channel could not be dispatched.
      </tp:docstring>
      <arg type="u" name="serial">
        <tp:docstring>Operation ID of the channel request</tp:docstring>
      </arg>
      <arg type="s" name="client_id">
        <tp:docstring>D-Bus name of the process which requested the
          channel</tp:docstring>
      </arg>
      <arg type="u" name="error_id">
        <tp:docstring>Error code</tp:docstring>
      </arg>
    </signal>
    <signal name="PresenceRequested">
      <tp:docstring>
        Emitted when a presence has been requested.
      </tp:docstring>
      <arg type="u" name="presence">
        <tp:docstring>The requested presence</tp:docstring>
      </arg>
      <arg type="s" name="message">
        <tp:docstring>The presence message</tp:docstring>
      </arg>
    </signal>
    <signal name="PresenceStatusRequested">
      <tp:docstring>
        Emitted when a presence has been requested.
        DEPRECATED
      </tp:docstring>
      <arg type="u" name="presence">
        <tp:docstring>The requested presence</tp:docstring>
      </arg>
    </signal>
    <signal name="PresenceChanged">
      <tp:docstring>
        Emitted when the actual presence has changed.
      </tp:docstring>
      <arg type="u" name="presence">
        <tp:docstring>The actual presence</tp:docstring>
      </arg>
      <arg type="s" name="message">
        <tp:docstring>The presence message</tp:docstring>
      </arg>
    </signal>
    <signal name="PresenceStatusActual">
      <tp:docstring>
        Emitted when the actual presence has changed.
        DEPRECATED
      </tp:docstring>
      <arg type="u" name="presence">
        <tp:docstring>The actual presence</tp:docstring>
      </arg>
    </signal>
    <signal name="UsedChannelsCountChanged">
      <tp:docstring>
        Emitted when the number of channels of a specified type has changed.
      </tp:docstring>
      <arg type="s" name="type">
        <tp:docstring>D-Bus interface name representing the channel type</tp:docstring>
      </arg>
      <arg type="u" name="count">
        <tp:docstring>The number of channels of this type</tp:docstring>
      </arg>
    </signal>
    <signal name="StatusActual">
      <tp:docstring>
        Emitted when the global connection status changes.
      </tp:docstring>
      <arg type="u" name="status">
        <tp:docstring>The actual status, meaning:
          <ul>
            <li>disconnected - all accounts are disconnected</li>
            <li>connecting - at least one account is connecting</li>
            <li>connected - at least one account is connected, and no account is connecting</li>
          </ul>
        </tp:docstring>
      </arg>
      <arg type="u" name="presence">
        <tp:docstring>The actual presence</tp:docstring>
      </arg>
    </signal>
    <method name="RegisterFilter">
      <tp:docstring>
        Signals the MissionControl service that a filter service is running for
        a specified type of channel.
      </tp:docstring>
      <arg type="s" name="bus_name" direction="in">
        <tp:docstring>D-Bus name where the filter service is</tp:docstring>
      </arg>
      <arg type="o" name="object_path" direction="in">
        <tp:docstring>D-Bus object path where the filter service is</tp:docstring>
      </arg>
      <arg type="s" name="channel_type" direction="in">
        <tp:docstring>Type of channel to be filtered</tp:docstring>
      </arg>
      <arg type="u" name="priority" direction="in">
        <tp:docstring>Priority of the filter</tp:docstring>
      </arg>
      <arg type="u" name="flag" direction="in">
        <tp:docstring>Flag</tp:docstring>
      </arg>
    </method>
  </interface>
</node>
